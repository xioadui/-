<!DOCTYPE>
<!--发布供需界面-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>发布供需</title>
    <meta content="text/html; charset=utf-8"/>
    <link href="css/header.css" rel="stylesheet" type="text/css" media="all"/>
    <link rel="stylesheet" href="css/sup&req.css" type="text/css"/>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <script type="text/javascript" src="js/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="js/header.js"></script>
    <script type="text/javascript">
        $(document).on('click', '#submit', function () {
            var supreq = $('#supreq').val().trim();//供应或需求
            var supreqtype = $('#supreqtype').val().trim();//发布的类型
            var supreqname = $('#supreqname').val().trim();//发布的标题
            var supreqzhaiyaotxt = $('#supreqzhaiyaotxt').val().trim();//发布摘要内容
            var supreqtxt = $('#supreqtxt').val().trim();//发布的详细内容
            if (supreq == '供应') {
                $.post(
                    '/provide/publish',
                    {
                        type: supreqtype,
                        title: supreqname,
                        digest: supreqzhaiyaotxt,
                        content: supreqtxt
                    },
                    function (date) {
                        if (date.result == 'success') {
                            alert("发布成功，等待管理员审核");
                            window.location.href = "/index.html"; //需要跳转的地址
                        }
                    }
                );
            } else {
                //需求
                $.post(
                    '/demand/publish',
                    {
                        type: supreqtype,
                        title: supreqname,
                        digest: supreqzhaiyaotxt,
                        content: supreqtxt
                    },
                    function (date) {
                        if (date.result == 'success') {
                            alert("发布成功，等待管理员审核");
                            window.location.href = "/index.html"; //需要跳转的地址
                        }
                    }
                );
            }
        })
    </script>
</head>
<body>
<div class="header">
</div>
<div class="form">
    <form id="form1">
        <fieldset>
            <div>
                <!-- 第一个选项框 选择供/需-->
                <select class="validate-selection" title="供/需" id="supreq">
                    <option>请选择供应/需求</option>
                    <option>供应</option>
                    <option>需求</option>
                </select>
            </div>

            <div>
                <!-- 第二个选项框，选择发布类别   -->
                <select class="validate-selection" title="发布类别" id="supreqtype">
                    <option>选择发布类别</option>
                    <option>教育</option>
                    <option>医疗医药保健</option>
                    <option>IT与通讯</option>
                    <option>机械电子</option>
                    <option>车辆交通</option>
                    <option>能源矿产</option>
                    <option>建筑房地产</option>
                    <option>家用电器</option>
                    <option>金融保险投资</option>
                </select>
            </div>
            <div>
                <!-- 需求/供应名称输入框 -->
                <input class="input_name" type="text" placeholder="在此输入标题" id="supreqname">

                </input>
            </div>

            <div class="inputzhaiyao_text">
                <!-- 摘要输入框 -->
                <textarea id="supreqzhaiyaotxt" class="required" type="text" placeholder="在此输入摘要内容"></textarea>
            </div>
            <div class="input_text">
                <!-- 详细内容输入框 -->
                <textarea id="supreqtxt" class="required" type="text" placeholder="在此输入详细内容"></textarea>
            </div>
            <input type="button" class="button" id="submit" value="提交发布"/>
        </fieldset>
    </form>
</div>
</body>

</html>