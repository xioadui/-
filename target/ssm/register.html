<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="/js/jquery-3.3.1.js"></script>
    <script type="text/javascript">
        $(document).on('click','#submit',function (){
                var userId = $('#field1').val().trim();//企业ID
                var enterprise = $('#field2').val().trim();//企业名称
                var username= $('#field3').val().trim();//企业法人
                var category= $('#field4').val().trim();//企业类型
                var brief = $('#field5').val().trim();//企业简介
                var introduction = $('#field6').val().trim();//企业介绍
                var address = $('#field7').val().trim();//企业地址
                var scale = $('#field8').val().trim();//企业规模
                var phone = $('#field9').val().trim();//企业电话
                var password = $('#field10').val().trim();//密码
                var network = $('#field11').val().trim();//官网
                var entDate = $('#field12').val().trim();//注册时间
                console.log(userId+" "+enterprise+" "+username+" "+category+" "+brief+" "+introduction+" "+address+" "+scale+" "+phone+" "+password+" "+network);
                $.ajax({
                    type: "get",
                    url: "/user/register" ,
                    data: {
                        entId:userId,
                        entName:enterprise,
                        entPerson:username,
                        entCategory:category,
                        entBrief:brief,
                        entIntroduction:introduction,
                        entAddress:address,
                        entSize:scale,
                        entPhone:phone,
                        entPassword:password,
                        entWebsize:network,
                        entIdentity:1,
                        entDate:entDate
                    },
                    success:function (data) {
                        alert("请等待管理员审核");
                        if(data.login == "success"){
                            location.href = "index.html";
                        }
                    },
                    error : function() {
                    }
                });
            }
        );

        function check(){//判断企业邮箱是否已注册
            var userId = $('#field1').val().trim();//企业ID
            $.ajax({
                type: "POST",
                url: "/user/check" ,
                data: {
                    entId:userId
                },
                success:function (data) {//已有邮箱时
                    if(data.entId == 'exist')
                        $("#la").html('<label>邮箱已注册</label>');
                    else
                        $("#la").html(' ');
                }
            });

        }


    </script>


    <link rel="stylesheet" href="css/register.css" type="text/css" />
</head>
<body>
<div class="form_content">
    <form id="form1"  method="get">
        <fieldset>
            <legend>注册</legend>
            <div class="form-row">
                <div class="field-label">企业邮箱:</div>
                <div class="field-widget">
                    <input name="field1" id="field1" class="required" title="企业邮箱" onblur="check()"/>
                    <div id="la" style="float:right"></div>
                </div>
            </div>

            <div class="form-row">
                <div class="field-label">企业名称:</div>
                <div class="field-widget"><input name="field2" id="field2" class="required" title="企业名称" /></div>
            </div>

            <div class="form-row">
                <div class="field-label">企业法人:</div>
                <div class="field-widget"><input name="field3" id="field3" class="required" title="企业法人" /></div>
            </div>

            <div class="form-row">
                <div class="field-label">企业类别:</div>
                <div class="field-widget">
                    <select  name="field4" id="field4" class="validate-selection" title="企业类别" >
                        <option>企业类别</option>
                        <option>医疗医药保健</option>
                        <option>IT与通讯</option>
                        <option>机械电子</option>
                        <option>车辆交通</option>
                        <option>能源矿产</option>
                        <option>建筑房地产</option>
                        <option>家用电器</option>
                        <option>金融保险投资</option>
                        <option>教育</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="field-label">企业简介:</div>
                <div class="field-widget"><textarea name="field5" id="field5" class="required"></textarea></div>
            </div>

            <div class="form-row">
                <div class="field-label">企业介绍:</div>
                <div class="field-widget"><textarea name="field6" id="field6" class="required"></textarea></div>
            </div>

            <div class="form-row">
                <div class="field-label">企业地址:</div>
                <div class="field-widget"><input name="field7" id="field7" class="required" title="企业地址" /></div>
            </div>

            <div class="form-row">
                <div class="field-label">企业规模:</div>
                <div class="field-widget"><input name="field8" id="field8" class="required" title="企业规模" /></div>
            </div>

            <div class="form-row">
                <div class="field-label">联系电话:</div>
                <div class="field-widget"><input name="field9" id="field9" class="required" title="联系电话" /></div>
            </div>

            <div class="form-row">
                <div class="field-label">登陆密码:</div>
                <div class="field-widget"><input name="field10" id="field10" class="required" title="登陆密码" /></div>
            </div>

            <div class="form-row">
                <div class="field-label">企业官网:</div>
                <div class="field-widget"><input name="field11" id="field11" class="required" title="企业官网" /></div>
            </div>

            <div class="form-row">
                <div class="field-label">注册时间:</div>
                <div class="field-widget"><input name="field12" id="field12" class="required" title="注册时间" /></div>
            </div>


            <div class="form-row">
                <div class="field-label">提交或返回主页</div>
                    <input type="button" class="submit" id="submit" value="提交" />
                <a href="index.html" style="text-decoration:none">
                    <input class="submit" type="button" value="返回"/>
                </a>
            </div>
        </fieldset>
    </form>
</div>
</body>
</html>